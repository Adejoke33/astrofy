---
import { type CollectionEntry, getCollection } from "astro:content";
import type { BlogSchema } from "../../content/config";
import PostLayout from "../../layouts/PostLayout.astro";
import createSlug from "../../lib/createSlug";
import { fetchHashnodePosts } from "src/lib/hashnode";

export async function getStaticPaths() {
  const postEntries = await fetchHashnodePosts();
  return postEntries.map((entry) => ({
    params: { slug: createSlug(entry.title) },
    props: {
      title: entry.title,
      subtitle: entry.subtitle,
      content: entry.content,
      updatedAt: entry.updatedAt,
      publishedAt: entry.publishedAt,
      coverImage: entry.coverImage,
      tags: entry.tags,
    },
  })); 
}
 

const { slug } = Astro.params;
const { title, subtitle, content, publishedAt, updatedAt, coverImage, tags } =
  Astro.props;
// const post: BlogSchema = entry.data;
---

<PostLayout
  title={title}
  subtitle={subtitle}
  ,
  content={content}
  ,
  publishedAt={publishedAt}
  ,
  updatedAt={updatedAt}
  ,
  coverImage={coverImage}
  ,
  tags={tags}
/>
src/lib/hashnode